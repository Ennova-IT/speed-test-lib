<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Speed-test-lib by akinaru</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Speed-test-lib</h1>
      <h2 class="project-tagline">Speed Test library for Java / Android</h2>
      <a href="https://github.com/akinaru/speed-test-lib" class="btn">View on GitHub</a>
      <a href="https://github.com/akinaru/speed-test-lib/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/akinaru/speed-test-lib/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="speed-test-library-for-java--android" class="anchor" href="#speed-test-library-for-java--android" aria-hidden="true"><span class="octicon octicon-link"></span></a>Speed Test library for Java / Android</h1>

<p><a href="http://akinaru.github.io/speed-test-lib/">http://akinaru.github.io/speed-test-lib/</a></p>

<p><i>Last update 26/05/2015</i></p>

<p>Speed Test library featuring :</p>

<ul>
<li>speed test download with transfer rate output</li>
<li>speed test upload with transfer rate output</li>
<li>download and upload progress monitoring</li>
<li>speed test server / port / uri can be configured easily</li>
</ul>

<p>Library is available in release folder, buildable with build.xml ant file.</p>

<ul>
<li>For download process, library will download file from given speed test server parameters and calculate transfer rate for downloading this file from server</li>
<li>For upload process, library will generate a random file with a given size and will upload this file to a server calculating transfer rate for uploading this file to server</li>
</ul>

<hr>

<h3>
<a id="how-to-use-" class="anchor" href="#how-to-use-" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use ?</h3>

<p><b>Instanciate SpeedTest class</b></p>

<pre><code>SpeedTestSocket speedTestSocket = new SpeedTestSocket();
</code></pre>

<p><b>Add a listener to monitor</b></p>

<ul>
<li>download process result with <code>onDownloadPacketsReceived</code> callback</li>
<li>upload process result with <code>onUploadPacketsReceived</code> callback</li>
<li>download progress with <code>onDownloadProgress</code> callback</li>
<li>upload progress with <code>onUploadProgress</code> callback</li>
<li>download error catch with <code>onDownloadError</code>
</li>
<li>upload error catch with <code>onUploadError</code>
</li>
</ul>

<pre><code>speedTestSocket.addSpeedTestListener(new ISpeedTestListener() {

    @Override
    public void onDownloadPacketsReceived(int packetSize, float transferRateBitPerSeconds, float transferRateOctetPerSeconds) {
        System.out.println("download transfer rate  : " + transferRateBitPerSeconds + " bps");
        System.out.println("download transfer rate  : " + transferRateOctetPerSeconds + "Bps");
    }

    @Override
    public void onDownloadError(int errorCode, String message) {
        System.out.println("Download error " + errorCode + " occured with message : " + message);
    }

    @Override
    public void onUploadPacketsReceived(int packetSize, float transferRateBitPerSeconds, float transferRateOctetPerSeconds) {
        System.out.println("download transfer rate  : " + transferRateBitPerSeconds + " bps");
        System.out.println("download transfer rate  : " + transferRateOctetPerSeconds + "Bps");
    }

    @Override
    public void onUploadError(int errorCode, String message) {
        System.out.println("Upload error " + errorCode + " occured with message : " + message);
    }

    @Override
    public void onDownloadProgress(int percent) {
    }

    @Override
    public void onUploadProgress(int percent) {
    }

});

</code></pre>

<p><b>Start Download speed test</b></p>

<p><code>void startDownload(String hostname, int port, String uri)</code></p>

<ul>
<li>
<code>hostname</code> : server hostname</li>
<li>
<code>port</code> : server port</li>
<li>
<code>uri</code> : uri to fetch your file from server</li>
</ul>

<pre><code>speedTestSocket.startDownload("ipv4.intuxication.testdebit.info", 80,"/fichiers/10Mo.dat");
</code></pre>

<p>You can wait for test completion with <code>closeSocketJoinRead()</code> which is prefered to <code>closeSocket()</code> since it join reading thread before resuming application.</p>

<pre><code>speedTestSocket.closeSocketJoinRead();
</code></pre>

<p><b>Start Upload speed test</b></p>

<pre><code>void startUpload(String hostname, int port, String uri, int fileSizeOctet)
</code></pre>

<ul>
<li>
<code>hostname</code> : server hostname</li>
<li>
<code>port</code> : server port</li>
<li>
<code>uri</code> : uri to fetch your file from server</li>
<li>
<code>fileSizeOctet</code> : the file size to be uploaded to server (file will be generated randomly and sent to speed test server)</li>
</ul>

<p>Here is an example for a file of 10Moctet :</p>

<pre><code>speedTestSocket.startUpload("1.testdebit.info", 80, "/", 10000000);
</code></pre>

<hr>

<h3>
<a id="quick-test-command-line-syntax" class="anchor" href="#quick-test-command-line-syntax" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick test command line syntax</h3> 

<p><code>java -jar speed-test-lib-1.0.jar</code></p>

<p>in folder ./http-endec-java/release</p>

<hr>

<ul>
<li>Project is JRE 1.7 compliant</li>
<li>You can build it with ant =&gt; build.xml</li>
<li>Development on Eclipse </li>
</ul>

<p><b>Tested with</b></p>

<ul>
<li><a href="https://testdebit.info/">https://testdebit.info/</a></li>
</ul>

<h3>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h3>

<p>manage unexpected socket disconnection for downloading and uploading</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/akinaru/speed-test-lib">Speed-test-lib</a> is maintained by <a href="https://github.com/akinaru">akinaru</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
